<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"> 
	<LINK REL="STYLESHEET" HREF="../../book.css" CHARSET="ISO-8859-1" TYPE="text/css"> 
	<title>g-Eclipse - Declaring a Virtual Organisation</title>
</head>

<body BGCOLOR="#ffffff">
<h1>Virtual Organisation Declaration</h1>

<h3>If you already belong to one or more VO's :</h3>
<p>If you already belong to a Virtual Organisation supported by the EGEE infrastructure, you will
   need your VO's settings such as <i>Name</i>, <i>Host</i>, <i>Port</i>, <i>Host DN</i> and 
   <i>Information System Endpoint</i> in order to continue. This information can be requested 
   from the manager of your VO.
</p>

<h3>If you do not currently belong to any VO :</h3>
<p>If you would like to test and use  g-Eclipse, but do not have access to an
existing Grid infrastructure, you can request membership to the Training VO
'geclipsetutor'. This Training VO is supported by the 
<a href="https://gilda.ct.infn.it/testbed.html">GILDA Testbed</a>. The following
actions need to be performed to become a member: 
<ol>
<li> Get your personal GILDA certificate. <br>
Security on the Grid is currently based on X.509 certificates. To get access to the 
geclipsetutor VO, you need to get a temporary certificate from the GILDA Certification 
Authority (GILDA CA). Detailed instructions can be found 
<a href="https://gilda.ct.infn.it/step1.html">here</a>. It is important to know that
this procedure can take 12-24 hours and includes more than just one step.
At the end of the procedure, your personal GILDA certificate is installed in your 
webbrowser and the files "usercert.pem" and "userkey.pem" are stored in a dedicated 
directory on your hard disk. 
<br> <br>The following items explain the actions needed to convert
*p12 certificates to the *pem certificates. This conversion is neccessary, as g-Eclipse 
is currently supporting *pem files only. But this will change in the future. <br>
<ol>
	<li> Save your certificate on your local filesystem. I.e. for the Firefox Browser
	perform the following actions <br>
	<ol>
		<li> Go to FireFox -> Preferences...
		<li> Click on ``Advaced''
		<li> Click on ''View Certificates''
		<li> Mark the certificate and click on ``Backup'' save as gilda.p12
	</ol> <br>
	<li> Convert the p12 certificate to a user cert and user key file in *pem format.
	Therefore you need the OpenSSL libraries installed on your system. Assuming you
	use a terminal and are in the folder with the file gilda.p12, perform the following
	actions. 
	<ol>
	   <li> perform the command: openssl pkcs12 -in gilda.p12 -out gilda.pem 
	   <li> Open the gilda.pem file with a text editor and copy everything 
	   (inclusive) between <br>
		-----BEGIN RSA PRIVATE KEY----- <br>
		.....<br>
		-----END RSA PRIVATE KEY-----<br>
		and save it as in a file called userkey.pem
	   <li> Change the file permissions of the file userkey.pem with the command: 
	   chmod 400 userkey.pem
	   <li> Open the gilda.pem file with a text editor and copy everything 
	   (inclusive) between <br>
		-----BEGIN CERTIFICATE-----<br>
		.....<br>
		-----END CERTIFICATE-----<br>
		and save it as in a file called usercert.pem
	   <li> Perform the following commands: <br>
	   openssl x509 -text -noout -in usercert.pem >> tmp <br>
	   cat usercert.pem >> tmp <br>
	   mv tmp usercert.pem
	</ol> 
	<p> The g-Eclipse team is currently working an a more user friendly solution 
	for the import of p12 certificates. In the meantime, the g-Eclipse team 
	is sorry for any inconvenience. But this procedure has to be done only once. 
	If you need any assistance in converting certificate formats, feel free to contact
	the g-Eclipse development team. </p>
	
	
</ol> 

<li> Accept the User Policy of the GILDA testbed <br>
Due to legal reasons, every user has to agree to the "Acceptable User Policy" of the 
GILDA testbed. This can be done <a href="https://gilda.ct.infn.it/aup.php">here</a>. 
<br><br>

<li>  Register to the "geclipsetutor" Virtual Organization <br>
With the first two steps finished, you are ready to request membership in the Virtual
Organisation "geclipsetutor". Goto the 
<a href="https://dgrid-voms.fzk.de:8443/voms/geclipsetutor/">VOMS webpage</a> 
(https://dgrid-voms.fzk.de:8443/voms/geclipsetutor/) of this VO. Be aware that you must 
perform this with the same browser on the same computer that you used to request your 
personal GILDA certificate. <br> 
Your request will be evaluated by the "geclipsetutor" VO managers and you will receive 
three emails: the first one to confirm your email address, the second one to let you 
know that your request is going to be processed, and the third one to let you know 
that your request has been accepted.  
<br><br>

<li> Then you should be ready to use the g-Eclipse framework to access the GILDA 
training Grid infrastructure. As there is manual interaction neccessary, the whole setup
procedure might take some time, but this will allow you to evaluate the power of the
g-Eclipse framework and of the underlying Grid infrastructure. 
</ol>

<p>Now, you can return to the g-Eclipse framework, and continue with the setup of the 
VO. </p>

<h3>Enter the VO configuration data:</h3>
<p> Open the <a class="command-link" href='javascript:executeCommand("org.eclipse.ui.window.preferences(preferencePageId=eu.geclipse.ui.internal.preference.VOPreferencePage)")'>
<img src="PLUGINS_ROOT/org.eclipse.help/command_link.png">
<b>g-Eclipse &gt; VO-Declarations</b></a> preference page. </p>

<p> Click on the <b>Add</b> button and, in the dialog that opens, put in the VO specific settings 
such as Name, Host, Port, Host DN, and Information System Endpoint. Click <b>Finish</b> when done. 
<br/>(Note: Ensure you enter the name of the VO exactly as you see it : 'geclipsetutor' is not the
same as 'g-EclipseTutor'.)</p>

<img src="images/wizard_NewGridProject_specifyAttribsForNewVO.jpg" alt="Attributes for VO" width="438">
</br>Figure 1: Settings for the 'geclipsetutor' VO</br><br>

<p>Back in the VO-Declarations preference page, select the VO that you just created and click <b>OK</b> 
to complete the process.</p>


<p><a href="../gettingstarted/maintopic.html">Back to Getting Started</a></p>
<p><a href="../gettingstarted/AuthenticationTokens.html">Continue to Generate Grid Authentication Tokens</a></p>

</body>
</html>